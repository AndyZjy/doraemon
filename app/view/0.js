exports.ids = [0];
exports.modules = {

/***/ "./app/web/pages/proxyServer/components/proxyRuleModal/index.js":
/*!**********************************************************************!*\
  !*** ./app/web/pages/proxyServer/components/proxyRuleModal/index.js ***!
  \**********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"prop-types\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_reg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/reg */ \"./app/web/utils/reg.js\");\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api */ \"./app/web/api/index.js\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./style.scss */ \"./app/web/pages/proxyServer/components/proxyRuleModal/style.scss\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\nconst { TextArea } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"];\nconst { Option } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Select\"];\n\nclass ProxyRuleModal extends react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent {\n  constructor(...args) {\n    var _temp;\n\n    return _temp = super(...args), this.handleModalOk = () => {\n      const { onOk, form, editable, proxyServer } = this.props;\n      form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          if (editable) {\n            onOk(Object.assign({}, proxyServer, values));\n          } else {\n            onOk(values);\n          }\n        }\n      });\n    }, this.handleModalCancel = () => {\n      const { onCancel } = this.props;\n      onCancel();\n    }, this.onClickQuickInput = () => {\n      const { form, proxyServer, localIp } = this.props;\n      const { ip } = proxyServer;\n      form.setFieldsValue({\n        target: `http://${ip || localIp}:8080`\n      });\n    }, this.onChangeRadio = () => {\n      this.props.form.setFieldsValue({\n        target: undefined\n      });\n    }, _temp;\n  }\n\n  render() {\n    const { visible, editable, form, proxyServer, confirmLoading, targetAddrs, localIp } = this.props;\n    const { getFieldDecorator, getFieldValue } = form;\n    const { ip, target, remark, mode } = proxyServer;\n    const formItemLayout = {\n      labelCol: {\n        span: 5\n      },\n      wrapperCol: {\n        span: 18\n      }\n    };\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      antd__WEBPACK_IMPORTED_MODULE_1__[\"Modal\"],\n      {\n        title: `${editable ? '编辑' : '新增'}代理规则`,\n        visible: visible,\n        confirmLoading: confirmLoading,\n        onOk: this.handleModalOk,\n        className: 'proxyRuleModal',\n        onCancel: this.handleModalCancel },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"],\n        formItemLayout,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: 'IP' },\n          getFieldDecorator('ip', {\n            rules: [{\n              required: true, message: '请输入IP'\n            }],\n            initialValue: ip || localIp\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u8F93\\u5165ip' }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u4EE3\\u7406\\u6A21\\u5F0F' },\n          getFieldDecorator('mode', {\n            rules: [{\n              required: true, message: '请输入IP'\n            }],\n            initialValue: mode === undefined ? '0' : mode\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Radio\"].Group,\n            { onChange: this.onChangeRadio },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"Radio\"],\n              { value: '0' },\n              '\\u624B\\u52A8'\n            ),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"Radio\"],\n              { value: '1' },\n              '\\u5F15\\u7528'\n            )\n          ))\n        ),\n        getFieldValue('mode') === '0' ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740' },\n          getFieldDecorator('target', {\n            rules: [{\n              required: true, pattern: _utils_reg__WEBPACK_IMPORTED_MODULE_3__[\"urlReg\"], message: '请输入正确格式的目标服务地址'\n            }],\n            initialValue: target\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u683C\\u5F0F\\u7684\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740' })),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Tooltip\"],\n            { placement: 'topLeft', title: `快速填写默认目标地址默认为：http://${ip || localIp}:8080` },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Button\"], { shape: 'circle', className: 'retweet', size: 'small', onClick: this.onClickQuickInput, icon: 'retweet' })\n          )\n        ) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740' },\n          getFieldDecorator('target', {\n            rules: [{ required: true, message: '请输入或选择目标服务地址' }],\n            initialValue: target ? target : undefined\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Select\"],\n            {\n              placeholder: '\\u8BF7\\u8F93\\u5165\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740'\n            },\n            targetAddrs.map(item => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              Option,\n              { key: item.id, value: item.target },\n              item.remark,\n              '\\uFF08',\n              item.target,\n              '\\uFF09'\n            ))\n          ))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u5907\\u6CE8' },\n          getFieldDecorator('remark', {\n            rules: [{\n              required: false, message: '请输入备注'\n            }],\n            initialValue: remark\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(TextArea, { rows: 4, placeholder: '\\u8BF7\\u8F93\\u5165\\u5907\\u6CE8' }))\n        )\n      )\n    );\n  }\n}\n\nProxyRuleModal.defaultProps = {\n  visible: false,\n  localIp: '',\n  onOk: () => {},\n  onCancel: () => {},\n  proxyServer: {},\n  targetAddrs: [],\n  confirmLoading: false\n};\nProxyRuleModal.propsTypes = {\n  localIp: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.string,\n  visible: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,\n  onOk: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,\n  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,\n  proxyServer: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,\n  targetAddrs: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.array,\n  confirmLoading: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].create()(ProxyRuleModal));\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/components/proxyRuleModal/index.js?");

/***/ }),

/***/ "./app/web/pages/proxyServer/components/proxyRuleModal/style.scss":
/*!************************************************************************!*\
  !*** ./app/web/pages/proxyServer/components/proxyRuleModal/style.scss ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n    var content = __webpack_require__(/*! !../../../../../../node_modules/css-loader??ref--6-1!../../../../../../node_modules/postcss-loader/lib??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./style.scss */ \"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/lib/index.js?!./node_modules/sass-loader/dist/cjs.js?!./app/web/pages/proxyServer/components/proxyRuleModal/style.scss\");\n    var insertCss = __webpack_require__(/*! ../../../../../../node_modules/isomorphic-style-loader/lib/insertCss.js */ \"./node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.i, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (false) { var removeCss; }\n  \n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/components/proxyRuleModal/style.scss?");

/***/ }),

/***/ "./app/web/pages/proxyServer/components/proxyServerModal/index.js":
/*!************************************************************************!*\
  !*** ./app/web/pages/proxyServer/components/proxyServerModal/index.js ***!
  \************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! prop-types */ \"prop-types\");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_reg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/reg */ \"./app/web/utils/reg.js\");\n/* harmony import */ var _proxyAddrsTable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./proxyAddrsTable */ \"./app/web/pages/proxyServer/components/proxyServerModal/proxyAddrsTable.js\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\nconst ProxyAddrsTableRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"forwardRef\"])((props, ref) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_proxyAddrsTable__WEBPACK_IMPORTED_MODULE_4__[\"default\"], props));\n\nclass ProxyServerModal extends react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent {\n  constructor(...args) {\n    var _temp;\n\n    return _temp = super(...args), this.state = {\n      selectedRowKeys: [0],\n      deleteRowKeys: []\n    }, this.handleModalOk = () => {\n      const { onOk, form, editable, proxyServer } = this.props;\n      form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          values.addrs = this.formatTargetAddrs(values.addrs);\n\n          if (editable) {\n            onOk(Object.assign({}, proxyServer, values));\n          } else {\n            onOk(values);\n          }\n        }\n      });\n    }, this.handleModalCancel = () => {\n      const { onCancel } = this.props;\n      onCancel();\n    }, this.formatTargetAddrs = targetAddrs => {\n      const { editable, proxyServer: { addrs } } = this.props;\n      const { deleteRowKeys } = this.state;\n      const deleteRow = [];\n      if (editable) {\n        addrs.forEach(item => {\n          if (deleteRowKeys.includes(item.rowId)) {\n            deleteRow.push(_extends({}, item, {\n              is_delete: 1\n            }));\n          }\n        });\n      }\n\n      const newAddrs = [...targetAddrs, ...deleteRow].map((_ref) => {\n        let { rowId } = _ref,\n            rest = _objectWithoutProperties(_ref, ['rowId']);\n\n        return _extends({}, rest);\n      });\n      return newAddrs;\n    }, this.addrsValidator = (rules, value, callback) => {\n      if (Array.isArray(value)) {\n        for (const addr of value) {\n          const target = addr.target;\n          if (!target) {\n            callback('请输入目标服务地址');\n          }\n          if (!_utils_reg__WEBPACK_IMPORTED_MODULE_3__[\"urlReg\"].test(target)) {\n            callback('请输入正确格式的目标服务地址');\n          }\n        }\n      }\n      callback();\n    }, this.handleRowSelect = (selectedRowKeys, selectedRows) => {\n      this.setState({ selectedRowKeys });\n      this.props.form.setFieldsValue({\n        target: selectedRows[0].target\n      });\n    }, _temp;\n  }\n\n  componentDidMount() {\n    const { target, addrs } = this.props.proxyServer;\n    if (Array.isArray(addrs) && addrs.length) {\n      const addrIdx = addrs.findIndex(item => item.target === target);\n      this.setState({\n        selectedRowKeys: [addrIdx]\n      });\n    }\n  }\n\n  render() {\n    const { selectedRowKeys, deleteRowKeys } = this.state;\n    const { visible, editable, form, proxyServer, confirmLoading } = this.props;\n    const { getFieldDecorator } = form;\n    const { name, target, api_doc_url, addrs } = proxyServer;\n    const formItemLayout = {\n      labelCol: {\n        span: 6\n      },\n      wrapperCol: {\n        span: 17\n      }\n    };\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      antd__WEBPACK_IMPORTED_MODULE_1__[\"Modal\"],\n      {\n        title: `${editable ? '编辑' : '新增'}代理服务`,\n        width: 720,\n        visible: visible,\n        confirmLoading: confirmLoading,\n        onOk: this.handleModalOk,\n        onCancel: this.handleModalCancel },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"],\n        formItemLayout,\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u4EE3\\u7406\\u670D\\u52A1\\u540D\\u79F0' },\n          getFieldDecorator('name', {\n            rules: [{\n              required: true, message: '请输入代理服务名称'\n            }],\n            initialValue: name\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u8F93\\u5165\\u4EE3\\u7406\\u670D\\u52A1\\u540D\\u79F0' }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u9ED8\\u8BA4\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740' },\n          getFieldDecorator('target', {\n            rules: [{\n              required: true, pattern: _utils_reg__WEBPACK_IMPORTED_MODULE_3__[\"urlReg\"], message: '请输入正确格式的目标服务地址'\n            }],\n            initialValue: target\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u901A\\u8FC7\\u4E0B\\u8868\\u9009\\u62E9\\u9ED8\\u8BA4\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740', disabled: true }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u63A5\\u53E3\\u6587\\u6863\\u5730\\u5740' },\n          getFieldDecorator('api_doc_url', {\n            initialValue: api_doc_url\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u8F93\\u5165\\u63A5\\u53E3\\u6587\\u6863\\u5730\\u5740' }))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item,\n          {\n            label: '\\u76EE\\u6807\\u670D\\u52A1\\u5730\\u5740\\u5217\\u8868' },\n          getFieldDecorator('addrs', {\n            rules: [{ required: true, message: '至少创建一条目标服务地址' }, { validator: this.addrsValidator }],\n            initialValue: addrs && addrs.length ? addrs : [{\n              rowId: 0,\n              target: '',\n              remark: ''\n            }]\n          })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(ProxyAddrsTableRef, {\n            rowDelete: {\n              deleteRowKeys,\n              onChange: deleteRowKeys => this.setState({ deleteRowKeys })\n            },\n            rowSelection: {\n              type: 'radio',\n              selectedRowKeys,\n              onChange: this.handleRowSelect\n            }\n          }))\n        )\n      )\n    );\n  }\n}\nProxyServerModal.defaultProps = {\n  visible: false,\n  onOk: () => {},\n  onCancel: () => {},\n  proxyServer: {},\n  confirmLoading: false\n};\nProxyServerModal.propsTypes = {\n  visible: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool,\n  onOk: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,\n  onCancel: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.func,\n  proxyServer: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.object,\n  confirmLoading: prop_types__WEBPACK_IMPORTED_MODULE_2___default.a.bool\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].create()(ProxyServerModal));\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/components/proxyServerModal/index.js?");

/***/ }),

/***/ "./app/web/pages/proxyServer/components/proxyServerModal/proxyAddrsTable.js":
/*!**********************************************************************************!*\
  !*** ./app/web/pages/proxyServer/components/proxyServerModal/proxyAddrsTable.js ***!
  \**********************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\nconst ProxyAddrsTable = props => {\n  const { value, onChange } = props;\n  const initRow = {\n    rowId: 0,\n    target: '',\n    remark: ''\n  };\n  const columns = [{\n    title: '服务地址',\n    dataIndex: 'target',\n    key: 'target',\n    render: (text, record, index) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], {\n      value: text,\n      placeholder: '\\u8BF7\\u8F93\\u5165\\u670D\\u52A1\\u5730\\u5740',\n      onChange: e => onDataChange(e.target.value, 'target', index)\n    })\n  }, {\n    title: '备注',\n    dataIndex: 'remark',\n    key: 'remark',\n    render: (text, record, index) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], {\n      value: text,\n      placeholder: '\\u8BF7\\u8F93\\u5165\\u5907\\u6CE8',\n      onChange: e => onDataChange(e.target.value, 'remark', index)\n    })\n  }, {\n    title: '操作',\n    dataIndex: 'actions',\n    key: 'actions',\n    render: (text, record, index) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      'a',\n      { onClick: () => handleDeleteRow(index) },\n      '\\u5220\\u9664'\n    )\n  }];\n\n  const onDataSourceChange = dataSource => {\n    onChange(dataSource);\n  };\n\n  const onDataChange = (val, type, index) => {\n    const rowItem = _extends({}, value[index], {\n      [type]: val\n    });\n    const newDataSource = [].concat(value);\n    newDataSource.splice(index, 1, rowItem);\n    onDataSourceChange(newDataSource);\n    handleRowSelect(rowItem, 'sync');\n  };\n\n  const handleAddRow = () => {\n    const lastRow = value[value.length - 1];\n    const newDataSource = [].concat(value);\n    const newRow = _extends({}, initRow, {\n      rowId: lastRow.rowId + 1\n    });\n    newDataSource.push(newRow);\n    onDataSourceChange(newDataSource);\n  };\n\n  const handleDeleteRow = index => {\n    const len = value.length;\n    if (len === 1) {\n      antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].warning('至少创建一条目标服务地址！');\n      return;\n    }\n    const rowItem = value[index];\n    const newDataSource = [].concat(value);\n    newDataSource.splice(index, 1);\n    onDataSourceChange(newDataSource, index);\n    handleRowSelect(rowItem, 'delete');\n    handleRowDelete(rowItem.rowId);\n  };\n\n  const handleRowSelect = (rowItem, type) => {\n    if (props.rowSelection) {\n      const { selectedRowKeys } = props.rowSelection;\n      const onRowSelect = props.rowSelection.onChange;\n      const rowId = rowItem.rowId;\n      if (rowId === selectedRowKeys[0]) {\n        if (type === 'sync') {\n          onRowSelect([rowId], [rowItem]);\n        }\n\n        if (type === 'delete') {\n          const firstAddr = value[0];\n          onRowSelect([firstAddr.rowId], [firstAddr]);\n        }\n      }\n    }\n  };\n\n  const handleRowDelete = rowId => {\n    if (props.rowDelete) {\n      const { deleteRowKeys } = props.rowDelete;\n      const keys = [...deleteRowKeys, rowId];\n      props.rowDelete.onChange(keys);\n    }\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    'div',\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Table\"], {\n      rowKey: 'rowId',\n      size: 'middle',\n      className: 'dt-pagination-lower dt-table-border dt-table-last-row-noborder',\n      columns: columns,\n      dataSource: value,\n      rowSelection: props.rowSelection,\n      pagination: false\n    }),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      antd__WEBPACK_IMPORTED_MODULE_1__[\"Button\"],\n      { className: 'mt-10', type: 'dashed', block: true, onClick: handleAddRow },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Icon\"], { type: 'plus' }),\n      '\\u6DFB\\u52A0'\n    )\n  );\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (ProxyAddrsTable);\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/components/proxyServerModal/proxyAddrsTable.js?");

/***/ }),

/***/ "./app/web/pages/proxyServer/index.js":
/*!********************************************!*\
  !*** ./app/web/pages/proxyServer/index.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api */ \"./app/web/api/index.js\");\n/* harmony import */ var _components_proxyServerModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/proxyServerModal */ \"./app/web/pages/proxyServer/components/proxyServerModal/index.js\");\n/* harmony import */ var _components_proxyRuleModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/proxyRuleModal */ \"./app/web/pages/proxyServer/components/proxyRuleModal/index.js\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! js-cookie */ \"js-cookie\");\n/* harmony import */ var js_cookie__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./style.scss */ \"./app/web/pages/proxyServer/style.scss\");\n/* harmony import */ var _style_scss__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_style_scss__WEBPACK_IMPORTED_MODULE_7__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\n\n\n\n\n\n\n\nconst { Paragraph } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Typography\"];\n\n\nconst confirm = antd__WEBPACK_IMPORTED_MODULE_1__[\"Modal\"].confirm;\nconst { Search } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"];\nconst { CheckableTag } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Tag\"];\n\nconst commonTags = JSON.parse(js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.get('common-tags') || '[]') || [];\nclass ProxyServer extends react__WEBPACK_IMPORTED_MODULE_0___default.a.PureComponent {\n  constructor(...args) {\n    var _temp;\n\n    return _temp = super(...args), this.state = {\n      localIp: '',\n      currentProxyServer: {},\n      proxyServerModalVisible: false,\n      proxyServerModalConfirmLoading: false,\n      targetAddrs: [],\n\n      currentProxyRule: {},\n      proxyRuleModalVisible: false,\n      proxyRuleModalConfirmLoading: false,\n\n      mainTableLoading: true,\n      maintTableList: [],\n      maintTableTotal: 10,\n      search: '',\n      mainTableParams: {\n        search: '',\n        pageNo: 1,\n        pageSize: 20\n      },\n      expandedRowKeys: [],\n\n      subTableData: [],\n      subTableLoading: true,\n      commonTagList: commonTags,\n      selectedTag: ''\n    }, this.loadMainData = () => {\n      this.getProxyServerList();\n      this.getLocalIp();\n    }, this.getLocalIp = () => {\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].getLocalIp().then(response => {\n        const { success, data, message } = response;\n        if (success) {\n          const localIp = data.localIp;\n          const rememberIp = js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.get('rememberIp') || '';\n          if (rememberIp && rememberIp !== localIp) {\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"notification\"].warning({\n              message: 'IP地址变更',\n              description: '您的IP地址【较上次登录时】已发生变更、请留意代理服务配置！',\n              duration: 30,\n              onClose: () => {\n                js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.set('rememberIp', localIp);\n              }\n            });\n          }\n\n          this.setState({\n            localIp\n          });\n        }\n      });\n    }, this.getProxyServerList = () => {\n      const { mainTableParams } = this.state;\n      this.setState({\n        mainTableLoading: true\n      });\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].getProxyServerList(mainTableParams).then(response => {\n        const { success, data } = response;\n        if (success) {\n          this.setState({\n            maintTableList: data.data,\n            maintTableTotal: data.count,\n            mainTableLoading: false\n          });\n        } else {\n          this.setState({\n            mainTableLoading: false\n          });\n        }\n      });\n    }, this.handleProxyServerEdit = row => {\n      const rowData = _extends({}, row);\n\n      this.getTargetAddrs(row.id, data => {\n        rowData.addrs = data.map((item, index) => _extends({ rowId: index }, item));\n        this.setState({\n          currentProxyServer: rowData,\n          proxyServerModalVisible: true\n        });\n      });\n    }, this.handleProxyServerStatusChange = row => {\n      const { status, id, name } = row;\n      const statusStr = status === 1 ? '禁用' : '开启';\n      confirm({\n        title: '确认',\n        content: `确认是否${statusStr}服务「${name}」`,\n        onOk: () => {\n          _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].changeProxyServerStatus({\n            status: status === 1 ? 0 : 1,\n            id\n          }).then(response => {\n            const { success } = response;\n            if (success) {\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success(`代理服务${statusStr}成功`);\n              this.getProxyServerList();\n            }\n          });\n        }\n      });\n    }, this.handleProxyServerModalOk = proxyServer => {\n      const { currentProxyServer, expandedRowKeys } = this.state;\n      const { addrs } = proxyServer,\n            rest = _objectWithoutProperties(proxyServer, ['addrs']);\n      this.setState({\n        proxyServerModalConfirmLoading: true\n      });\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"][proxyServer.id ? 'updateProxyServer' : 'addProxyServer']({\n        proxyServer: proxyServer.id ? proxyServer : rest,\n        targetAddrs: addrs\n      }).then(response => {\n        const { success, message } = response;\n        if (success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success(`${JSON.stringify(currentProxyServer) === '{}' ? '新增' : '编辑'}代理服务成功`);\n          this.handleProxyServerModalCancel();\n          this.getProxyServerList();\n          if (expandedRowKeys.length) {\n            this.getTargetAddrs(expandedRowKeys[0], data => {\n              this.setState({ targetAddrs: data || [] });\n            });\n          }\n        } else {\n          this.setState({\n            proxyServerModalConfirmLoading: false\n          });\n        }\n      });\n    }, this.handleProxyServerModalCancel = () => {\n      this.ProxyServerModal.resetFields();\n      this.setState({\n        currentProxyServer: {},\n        proxyServerModalConfirmLoading: false,\n        proxyServerModalVisible: false\n      });\n    }, this.handleProxyServerDelete = row => {\n      const { id, name } = row;\n      confirm({\n        title: '确认',\n        content: `确认是否删除服务「${name}」`,\n        onOk: () => {\n          _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].deleteProxyServer({\n            id\n          }).then(response => {\n            const { success } = response;\n            if (success) {\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success('代理服务删除成功');\n              this.getProxyServerList();\n            }\n          });\n        }\n      });\n    }, this.handleProxyRuleEdit = row => {\n      const { expandedRowKeys } = this.state;\n      this.getTargetAddrs(expandedRowKeys[0], data => {\n        this.setState({\n          targetAddrs: data || [],\n          currentProxyRule: row,\n          proxyRuleModalVisible: true\n        });\n      });\n    }, this.handleProxyRuleDelete = (row, mainTableRow) => {\n      const { name } = mainTableRow;\n      const { ip } = row;\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].deleteProxyRule({\n        id: row.id\n      }).then(response => {\n        const { success } = response;\n        if (success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success(`代理服务「${name}」下的代理规则「${ip}」删除成功`);\n          this.loadSubTableData(mainTableRow);\n        }\n      });\n    }, this.handleProxyRuleModalOk = proxyRule => {\n      let apiFunName, actionType;\n      const { maintTableList, expandedRowKeys } = this.state;\n      const currentProxyServer = maintTableList.find(row => row.id === expandedRowKeys[0]);\n      proxyRule['proxy_server_id'] = currentProxyServer.id;\n      this.setState({\n        proxyRuleModalConfirmLoading: true\n      });\n      if (proxyRule.id) {\n        apiFunName = 'updateProxyRule';\n        actionType = '编辑';\n      } else {\n        apiFunName = 'addProxyRule';\n        actionType = '新增';\n      }\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"][apiFunName](proxyRule).then(response => {\n        const { success } = response;\n        if (success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success(`${actionType}代理规则成功`);\n          this.loadSubTableData(currentProxyServer);\n          this.handleProxyRuleModalCancel();\n        } else {\n          this.setState({\n            proxyRuleModalConfirmLoading: false\n          });\n        }\n      });\n    }, this.onHandleUpdateProxyRule = record => {\n      const { ip, target, id } = record;\n      const { localIp } = this.props;\n      const { maintTableList, expandedRowKeys } = this.state;\n      const currentProxyServer = maintTableList.find(row => row.id === expandedRowKeys[0]);\n      const urlReg = new RegExp(/(http|ftp|https):\\/\\/([\\w\\-_]+\\.[\\w\\-_]+[\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/, 'i');\n      let regResult = urlReg.exec(target);\n      let tagetIp = target;\n      if (regResult) {\n        let tagetArrIPs = regResult[2].split(':') || [];\n        tagetIp = tagetArrIPs[0] != ip ? target : `${regResult[1]}://${localIp}:${tagetArrIPs[1] || '8080'}`;\n      }\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].updateProxyRule({\n        id,\n        ip: ip != localIp ? localIp : ip,\n        target: tagetIp\n      }).then(response => {\n        const { success, message } = response;\n        if (success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success('更新代理规则成功');\n          this.loadSubTableData(currentProxyServer);\n          this.handleProxyRuleModalCancel();\n        } else {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].error(message);\n          this.setState({\n            proxyRuleModalConfirmLoading: false\n          });\n        }\n      });\n    }, this.handleProxyRuleModalCancel = () => {\n      this.ProxyRuleModal.resetFields();\n      this.setState({\n        currentProxyRule: {},\n        proxyRuleModalConfirmLoading: false,\n        proxyRuleModalVisible: false\n      });\n    }, this.onChangeSearch = e => {\n      const value = e.target.value;\n      this.setState({\n        search: value\n      });\n    }, this.onSearchProject = value => {\n      const { mainTableParams, selectedTag, search } = this.state;\n      this.setState({\n        mainTableParams: Object.assign({}, mainTableParams, {\n          pageNo: 1,\n          search: value\n        }),\n        selectedTag: search ? [] : selectedTag\n      }, () => {\n        this.getProxyServerList();\n      });\n    }, this.handleTableChange = pagination => {\n      const { current, pageSize } = pagination;\n      const { mainTableParams } = this.state;\n      this.setState({\n        mainTableParams: Object.assign({}, mainTableParams, {\n          pageNo: current,\n          pageSize\n        })\n      }, () => {\n        this.getProxyServerList();\n      });\n    }, this.handleTableExpandChange = (expanded, record) => {\n      if (expanded) {\n        this.setState({\n          expandedRowKeys: [record.id]\n        });\n        this.loadSubTableData(record);\n      } else {\n        this.setState({\n          expandedRowKeys: []\n        });\n      }\n    }, this.handleChangeStatus = (check, record) => {\n      const { maintTableList, expandedRowKeys } = this.state;\n      const currentProxyServer = maintTableList.find(row => row.id === expandedRowKeys[0]);\n      const { id } = record;\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].updateProxyRuleStatus({\n        id,\n        status: check ? 1 : 0\n      }).then(res => {\n        if (res.success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].success(check ? '启用代理' : '禁用代理');\n          this.loadSubTableData(currentProxyServer);\n        }\n      });\n    }, this.setCommonTag = (row, isCommon) => {\n      const { name } = row;\n      const { commonTagList } = this.state;\n      let newList = [];\n      if (isCommon) {\n        newList = commonTagList.filter(item => item != name);\n      } else {\n        newList = Array.from(new Set([name, ...commonTagList])).splice(0, 4);\n      }\n      this.setState({\n        commonTagList: newList\n      });\n      js_cookie__WEBPACK_IMPORTED_MODULE_5___default.a.set('common-tags', JSON.stringify(newList));\n    }, this.tableExpandedRowRender = mainTableRow => {\n      const { subTableLoading, subTableData, localIp } = this.state;\n      const columns = [{\n        title: '序号',\n        key: 'index',\n        width: 100,\n        render: (value, row, index) => index + 1\n      }, {\n        title: 'IP',\n        key: 'ip',\n        dataIndex: 'ip',\n        width: 200,\n        render: text => {\n          return text === localIp ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Tooltip\"],\n            { placement: 'topLeft', title: `当前用户 IP:${localIp}` },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              'span',\n              { className: 'ip-wrap' },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement('i', { className: 'iconfont iconicon_star' }),\n              text\n            )\n          ) : text;\n        }\n      }, {\n        title: '目标代理服务地址',\n        key: 'target',\n        dataIndex: 'target'\n      }, {\n        title: '备注',\n        key: 'remark',\n        dataIndex: 'remark'\n      }, {\n        title: '状态',\n        key: 'status',\n        width: 160,\n        dataIndex: 'status',\n        render: (text, record) => {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Switch\"], { defaultChecked: !!text, checkedChildren: '\\u5F00', unCheckedChildren: '\\u5173', onChange: e => this.handleChangeStatus(e, record) });\n        }\n      }, {\n        title: '操作',\n        key: 'action',\n        width: 160,\n        render: (value, row, index) => {\n          return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n            null,\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"Tooltip\"],\n              { placement: 'topLeft', title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                  'div',\n                  null,\n                  react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                    'div',\n                    null,\n                    '\\u5FEB\\u901F\\u66F4\\u65B0\\u4EE3\\u7406\\u89C4\\u5219\\uFF1A'\n                  ),\n                  react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                    'div',\n                    null,\n                    '1\\u3001\\u6839\\u636EIP\\u53CA\\u76EE\\u6807IP\\u5224\\u65AD\\u662F\\u5426\\u4E3A\\u540C\\u7C7B\\u578B\\u4EE3\\u7406\\u670D\\u52A1;'\n                  ),\n                  react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                    'div',\n                    null,\n                    '2\\u3001\\u5F53ip\\u4E0E\\u672C\\u5730ip\\u4E0D\\u4E00\\u81F4\\u65F6\\uFF0C\\u66F4\\u65B0IP\\u4E3A\\u672C\\u673Aip\\uFF1B'\n                  ),\n                  react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                    'div',\n                    null,\n                    '3\\u3001\\u6839\\u636E\\u662F\\u5426\\u4E3A\\u540C\\u7C7B\\u578B\\uFF0C\\u51B3\\u5B9A\\u662F\\u5426\\u66F4\\u65B0\\u76EE\\u6807\\u4EE3\\u7406\\u670D\\u52A1'\n                  )\n                ) },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                'a',\n                { onClick: () => this.onHandleUpdateProxyRule(row) },\n                '\\u66F4\\u65B0'\n              )\n            ),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Divider\"], { type: 'vertical' }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              'a',\n              { onClick: this.handleProxyRuleEdit.bind(this, row) },\n              '\\u7F16\\u8F91'\n            ),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Divider\"], { type: 'vertical' }),\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              antd__WEBPACK_IMPORTED_MODULE_1__[\"Popconfirm\"],\n              { placement: 'right', title: '\\u786E\\u8BA4\\u662F\\u5426\\u5220\\u9664\\u8BE5\\u4EE3\\u7406\\u89C4\\u5219', onConfirm: this.handleProxyRuleDelete.bind(this, row, mainTableRow) },\n              react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                'a',\n                null,\n                '\\u5220\\u9664'\n              )\n            )\n          );\n        }\n      }];\n      return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        'div',\n        { style: { padding: '0 10px' } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          'div',\n          { className: 'text-right marginBottom12' },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Button\"],\n            { icon: 'plus', size: 'small', type: 'primary', onClick: this.handleAddRule },\n            '\\u6DFB\\u52A0\\u89C4\\u5219'\n          )\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Table\"], {\n          size: 'small',\n          rowKey: row => row.id,\n          loading: subTableLoading,\n          columns: columns,\n          dataSource: subTableData,\n          pagination: false })\n      );\n    }, this.handleAddRule = () => {\n      const { expandedRowKeys } = this.state;\n      this.getTargetAddrs(expandedRowKeys[0], data => {\n        this.setState({\n          targetAddrs: data || [],\n          proxyRuleModalVisible: true\n        });\n      });\n    }, this.getTargetAddrs = (id, callback) => {\n      _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].getTargetAddrs({ id }).then(response => {\n        const { success, data, message } = response;\n        if (!success) {\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"message\"].error(message);\n        }\n        callback && callback(data);\n      });\n    }, _temp;\n  }\n\n  componentDidMount() {\n    this.loadMainData();\n  }\n\n  loadSubTableData(row) {\n    const { id } = row;\n    this.setState({\n      subTableLoading: true\n    });\n    _api__WEBPACK_IMPORTED_MODULE_2__[\"API\"].getProxyRuleList({\n      proxy_server_id: id\n    }).then(response => {\n      const { success, data } = response;\n      if (success) {\n        this.setState({\n          subTableData: data.data,\n          subTableLoading: false\n        });\n      } else {\n        this.setState({\n          subTableLoading: false\n        });\n      }\n    });\n  }\n  handleChange(tag) {\n    const { selectedTag } = this.state;\n    const newTag = tag === selectedTag ? '' : tag;\n    this.setState({ selectedTag: newTag }, () => {\n      this.onSearchProject(newTag);\n    });\n  }\n\n  render() {\n    const {\n      localIp,\n      maintTableList,\n      mainTableParams,\n      maintTableTotal,\n      mainTableLoading,\n      expandedRowKeys,\n      currentProxyServer,\n      proxyServerModalVisible,\n      proxyServerModalConfirmLoading,\n      currentProxyRule,\n      proxyRuleModalVisible,\n      proxyRuleModalConfirmLoading,\n      commonTagList,\n      selectedTag,\n      search\n    } = this.state;\n    const columns = [{\n      title: '序号',\n      key: 'index',\n      render: (value, row, index) => index + 1,\n      width: 80\n    }, {\n      title: '项目名称',\n      key: 'name',\n      dataIndex: 'name',\n      width: 200\n    }, {\n      title: '代理服务地址',\n      key: 'proxy_server_address',\n      dataIndex: 'proxy_server_address',\n      render: value => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        Paragraph,\n        { copyable: true },\n        value\n      )\n    }, {\n      title: '默认代理目标',\n      key: 'target',\n      dataIndex: 'target',\n      render: (value, record) => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        'span',\n        null,\n        value,\n        record.api_doc_url && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          'a',\n          { href: record.api_doc_url, rel: 'noopener noreferrer', target: '_blank' },\n          '\\xA0[\\u63A5\\u53E3\\u6587\\u6863]'\n        )\n      )\n    }, {\n      title: '状态',\n      key: 'status',\n      dataIndex: 'status',\n      width: 140,\n      render: (value, row) => {\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Badge\"], { status: Boolean(value) ? 'success' : 'error', text: Boolean(value) ? '已开启' : '已禁用' })\n        );\n      }\n    }, {\n      title: '操作',\n      key: 'actions',\n      width: 200,\n      render: (value, row) => {\n        const { status, name } = row;\n        const isCommon = commonTagList.includes(name);\n        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            'a',\n            { onClick: this.handleProxyServerEdit.bind(this, row) },\n            '\\u7F16\\u8F91'\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Divider\"], { type: 'vertical' }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            'a',\n            { onClick: this.handleProxyServerDelete.bind(this, row) },\n            '\\u5220\\u9664'\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Divider\"], { type: 'vertical' }),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_1__[\"Tooltip\"],\n            { placement: 'topLeft', title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                'div',\n                null,\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                  'div',\n                  null,\n                  '\\u8BBE\\u7F6E\\u4E3A\\u5E38\\u7528\\u9879\\u76EE'\n                ),\n                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n                  'div',\n                  null,\n                  '\\u6700\\u591A\\u53EF\\u8BBE\\u7F6E4\\u4E2A\\u5E38\\u7528\\u9879\\u76EE'\n                )\n              ) },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              'a',\n              { onClick: () => this.setCommonTag(row, isCommon) },\n              isCommon ? '取消收藏' : '收藏'\n            )\n          )\n        );\n      }\n    }];\n\n    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      'div',\n      { className: 'page-proxy-server' },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        'div',\n        { className: 'title_wrap' },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          'div',\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Search, {\n            placeholder: '\\u8BF7\\u8F93\\u5165\\u9879\\u76EE\\u540D\\u79F0\\u641C\\u7D22',\n            value: search,\n            onChange: this.onChangeSearch,\n            onSearch: this.onSearchProject,\n            className: 'search dt-form-shadow-bg' }),\n          commonTagList.length ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            'span',\n            { style: { marginRight: 8, marginLeft: 20 } },\n            '\\u5E38\\u7528\\u9879\\u76EE:'\n          ) : null,\n          commonTagList.map(tag => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            CheckableTag,\n            {\n              key: tag,\n              checked: tag == selectedTag,\n              onChange: checked => this.handleChange(tag, checked)\n            },\n            tag\n          ))\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_1__[\"Button\"],\n          { type: 'primary', icon: 'plus', onClick: () => {\n              this.setState({ proxyServerModalVisible: true });\n            } },\n          '\\u6DFB\\u52A0\\u670D\\u52A1'\n        )\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Table\"], {\n        rowKey: row => row.id,\n        loading: mainTableLoading,\n        columns: columns,\n        scroll: { y: true },\n        style: { height: 'calc(100vh - 64px - 40px - 44px)' },\n        dataSource: maintTableList,\n        className: 'dt-table-fixed-base',\n        expandedRowKeys: expandedRowKeys,\n        expandedRowRender: this.tableExpandedRowRender,\n        onExpand: this.handleTableExpandChange,\n        onChange: this.handleTableChange,\n        pagination: {\n          size: 'small',\n          total: maintTableTotal,\n          current: mainTableParams.pageNo,\n          pageSize: mainTableParams.pageSize,\n          showTotal: total => react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            'span',\n            null,\n            '\\u5171',\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              'span',\n              { style: { color: '#3F87FF' } },\n              total\n            ),\n            '\\u6761\\u6570\\u636E\\uFF0C\\u6BCF\\u9875\\u663E\\u793A',\n            mainTableParams.pageSize,\n            '\\u6761'\n          )\n        } }),\n      proxyServerModalVisible && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_proxyServerModal__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n        ref: modal => this.ProxyServerModal = modal,\n        editable: JSON.stringify(currentProxyServer) !== '{}',\n        proxyServer: currentProxyServer,\n        confirmLoading: proxyServerModalConfirmLoading,\n        visible: proxyServerModalVisible,\n        onOk: this.handleProxyServerModalOk,\n        onCancel: this.handleProxyServerModalCancel }),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_proxyRuleModal__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n        ref: modal => this.ProxyRuleModal = modal,\n        localIp: localIp,\n        editable: JSON.stringify(currentProxyRule) !== '{}',\n        proxyServer: currentProxyRule,\n        targetAddrs: this.state.targetAddrs,\n        confirmLoading: proxyRuleModalConfirmLoading,\n        visible: proxyRuleModalVisible,\n        onOk: this.handleProxyRuleModalOk,\n        onCancel: this.handleProxyRuleModalCancel })\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    localIp: state.global.localIp\n  };\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(react_redux__WEBPACK_IMPORTED_MODULE_6__[\"connect\"])(mapStateToProps)(ProxyServer));\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/index.js?");

/***/ }),

/***/ "./app/web/pages/proxyServer/style.scss":
/*!**********************************************!*\
  !*** ./app/web/pages/proxyServer/style.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("\n    var content = __webpack_require__(/*! !../../../../node_modules/css-loader??ref--6-1!../../../../node_modules/postcss-loader/lib??postcss!../../../../node_modules/sass-loader/dist/cjs.js??ref--6-3!./style.scss */ \"./node_modules/css-loader/index.js?!./node_modules/postcss-loader/lib/index.js?!./node_modules/sass-loader/dist/cjs.js?!./app/web/pages/proxyServer/style.scss\");\n    var insertCss = __webpack_require__(/*! ../../../../node_modules/isomorphic-style-loader/lib/insertCss.js */ \"./node_modules/isomorphic-style-loader/lib/insertCss.js\");\n\n    if (typeof content === 'string') {\n      content = [[module.i, content, '']];\n    }\n\n    module.exports = content.locals || {};\n    module.exports._getContent = function() { return content; };\n    module.exports._getCss = function() { return content.toString(); };\n    module.exports._insertCss = function(options) { return insertCss(content, options) };\n    \n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (false) { var removeCss; }\n  \n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/style.scss?");

/***/ }),

/***/ "./app/web/utils/reg.js":
/*!******************************!*\
  !*** ./app/web/utils/reg.js ***!
  \******************************/
/*! exports provided: urlReg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"urlReg\", function() { return urlReg; });\nconst urlReg = new RegExp(/(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/, 'i');\n\n//# sourceURL=webpack:///./app/web/utils/reg.js?");

/***/ }),

/***/ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/lib/index.js?!./node_modules/sass-loader/dist/cjs.js?!./app/web/pages/proxyServer/components/proxyRuleModal/style.scss":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader??ref--6-1!./node_modules/postcss-loader/lib??postcss!./node_modules/sass-loader/dist/cjs.js??ref--6-3!./app/web/pages/proxyServer/components/proxyRuleModal/style.scss ***!
  \********************************************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../../../../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".proxyRuleModal .retweet {\\n  position: absolute;\\n  right: -30px;\\n  top: -6px; }\\n\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/components/proxyRuleModal/style.scss?./node_modules/css-loader??ref--6-1!./node_modules/postcss-loader/lib??postcss!./node_modules/sass-loader/dist/cjs.js??ref--6-3");

/***/ }),

/***/ "./node_modules/css-loader/index.js?!./node_modules/postcss-loader/lib/index.js?!./node_modules/sass-loader/dist/cjs.js?!./app/web/pages/proxyServer/style.scss":
/*!******************************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader??ref--6-1!./node_modules/postcss-loader/lib??postcss!./node_modules/sass-loader/dist/cjs.js??ref--6-3!./app/web/pages/proxyServer/style.scss ***!
  \******************************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("exports = module.exports = __webpack_require__(/*! ../../../../node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.i, \".page-proxy-server .title_wrap {\\n  display: flex;\\n  justify-content: space-between;\\n  align-self: center;\\n  margin-bottom: 12px; }\\n  .page-proxy-server .title_wrap .search {\\n    width: 200px;\\n    height: 32px; }\\n\\n.page-proxy-server .ant-tag-checkable {\\n  cursor: pointer; }\\n\\n.page-proxy-server .marginBottom12 {\\n  margin-bottom: 12px; }\\n\\n.page-proxy-server .ip-wrap {\\n  position: relative;\\n  cursor: pointer; }\\n  .page-proxy-server .ip-wrap .iconicon_star {\\n    position: absolute;\\n    left: -16px;\\n    color: #ffc240;\\n    font-size: 12px;\\n    vertical-align: top; }\\n\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./app/web/pages/proxyServer/style.scss?./node_modules/css-loader??ref--6-1!./node_modules/postcss-loader/lib??postcss!./node_modules/sass-loader/dist/cjs.js??ref--6-3");

/***/ })

};;