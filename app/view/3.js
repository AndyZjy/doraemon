exports.ids = [3];
exports.modules = {

/***/ "./app/web/pages/switchHosts/editHosts/hostsInfo.js":
/*!**********************************************************!*\
  !*** ./app/web/pages/switchHosts/editHosts/hostsInfo.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-redux */ \"react-redux\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_2__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\nconst { Paragraph } = antd__WEBPACK_IMPORTED_MODULE_1__[\"Typography\"];\nconst FormItem = antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].Item;\nconst formItemLayout = {\n  labelCol: {\n    span: 6\n  },\n  wrapperCol: {\n    span: 17\n  }\n};\n\nconst HostsInfo = props => {\n  const { serverInfo } = Object(react_redux__WEBPACK_IMPORTED_MODULE_2__[\"useSelector\"])(state => state.global);\n  const { isEdit, form, hostsInfo } = props;\n  const { getFieldDecorator } = form;\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"],\n    null,\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      FormItem,\n      _extends({\n        label: '\\u5206\\u7EC4\\u540D\\u79F0'\n      }, formItemLayout),\n      getFieldDecorator('groupName', {\n        initialValue: isEdit ? hostsInfo.groupName : '',\n        rules: [{ required: true, message: '请输入分组名称' }, { max: 64, message: '长度不超过64个字符' }]\n      })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"], { placeholder: '\\u8BF7\\u8F93\\u5165\\u5206\\u7EC4\\u540D\\u79F0\\uFF0C\\u957F\\u5EA6\\u4E0D\\u8D85\\u8FC764\\u4E2A\\u5B57\\u7B26' }))\n    ),\n    isEdit && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      react__WEBPACK_IMPORTED_MODULE_0__[\"Fragment\"],\n      null,\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        FormItem,\n        _extends({ label: '\\u5206\\u7EC4API' }, formItemLayout),\n        hostsInfo.groupApi ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          Paragraph,\n          { style: { marginBottom: 0 }, copyable: true },\n          `${serverInfo.protocol}://${serverInfo.host}${hostsInfo.groupApi}`\n        ) : '--'\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      FormItem,\n      _extends({\n        label: '\\u5206\\u7EC4\\u63CF\\u8FF0'\n      }, formItemLayout),\n      getFieldDecorator('groupDesc', {\n        initialValue: isEdit ? hostsInfo.groupDesc : '',\n        rules: [{ max: 255, message: '长度不超过255个字符' }]\n      })(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_1__[\"Input\"].TextArea, { placeholder: '\\u8BF7\\u8F93\\u5165\\u5206\\u7EC4\\u63CF\\u8FF0\\uFF0C\\u957F\\u5EA6\\u4E0D\\u8D85\\u8FC7255\\u4E2A\\u5B57\\u7B26' }))\n    )\n  );\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (antd__WEBPACK_IMPORTED_MODULE_1__[\"Form\"].create()(HostsInfo));\n\n//# sourceURL=webpack:///./app/web/pages/switchHosts/editHosts/hostsInfo.js?");

/***/ }),

/***/ "./app/web/pages/switchHosts/editHosts/index.js":
/*!******************************************************!*\
  !*** ./app/web/pages/switchHosts/editHosts/index.js ***!
  \******************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ \"react-router-dom\");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_router_dom__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! antd */ \"antd\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(antd__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_codemirror2__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-codemirror2 */ \"react-codemirror2\");\n/* harmony import */ var react_codemirror2__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_codemirror2__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api */ \"./app/web/api/index.js\");\n/* harmony import */ var _components_loading__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/loading */ \"./app/web/components/loading/index.js\");\n/* harmony import */ var _hostsInfo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./hostsInfo */ \"./app/web/pages/switchHosts/editHosts/hostsInfo.js\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\n\n\nconst EditHosts = props => {\n  const [loading, setLoading] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);\n  const [saveLoading, setSaveLoading] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [pushSaveLoading, setPushSaveLoading] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [hosts, setHosts] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [hostsInfo, setHostsInfo] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])({});\n  const infoRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])(null);\n\n  const { match } = props;\n  const { id, type } = match.params;\n  const isCreate = type === 'add';\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (isCreate) {\n      setLoading(false);\n    } else {\n      getHostsInfo();\n    }\n  }, [id]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    try {\n      __webpack_require__(/*! codemirror/mode/nginx/nginx */ \"./node_modules/codemirror/mode/nginx/nginx.js\");\n      __webpack_require__(/*! codemirror/mode/shell/shell */ \"./node_modules/codemirror/mode/shell/shell.js\");\n      __webpack_require__(/*! codemirror/theme/material-darker.css */ \"./node_modules/codemirror/theme/material-darker.css\");\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n\n  const getHostsInfo = () => {\n    _api__WEBPACK_IMPORTED_MODULE_4__[\"API\"].getHostsInfo({ id }).then(res => {\n      const { success, data } = res;\n      if (success) {\n        setHostsInfo(data);\n        setHosts(data.hosts || '');\n        setLoading(false);\n      }\n    });\n  };\n\n  const handleHostsSave = ({ is_push }) => {\n    infoRef.current.validateFields((err, values) => {\n      if (!err) {\n        const params = _extends({}, values, {\n          hosts,\n          is_push: isCreate ? is_push : hostsInfo.is_push || is_push\n        });\n        const setLoadingAction = is_push ? setPushSaveLoading : setSaveLoading;\n        isCreate ? createHosts(params, setLoadingAction) : updateHosts(Object.assign(params, { id }), setLoadingAction);\n      }\n    });\n  };\n\n  const createHosts = (params, setLoadingAction) => {\n    setLoadingAction(true);\n    _api__WEBPACK_IMPORTED_MODULE_4__[\"API\"].createHosts(params).then(res => {\n      setLoadingAction(false);\n      const { success } = res;\n      if (success) {\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"message\"].success('保存成功');\n        props.history.push('/page/switch-hosts-list');\n      }\n    });\n  };\n\n  const updateHosts = (params, setLoadingAction) => {\n    setLoadingAction(true);\n    _api__WEBPACK_IMPORTED_MODULE_4__[\"API\"].updateHosts(params).then(res => {\n      setLoadingAction(false);\n      const { success } = res;\n      if (success) {\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"message\"].success('更新成功');\n        props.history.push('/page/switch-hosts-list');\n      }\n    });\n  };\n\n  return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n    _components_loading__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    { loading: loading },\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      antd__WEBPACK_IMPORTED_MODULE_2__[\"Row\"],\n      { className: 'mb-12' },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"Col\"],\n        { span: 18 },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_2__[\"Breadcrumb\"],\n          null,\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_2__[\"Breadcrumb\"].Item,\n            null,\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n              react_router_dom__WEBPACK_IMPORTED_MODULE_1__[\"Link\"],\n              { to: '/page/switch-hosts-list' },\n              'hosts\\u7BA1\\u7406'\n            )\n          ),\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_2__[\"Breadcrumb\"].Item,\n            null,\n            isCreate ? '创建' : '编辑',\n            'hosts'\n          )\n        )\n      ),\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"Col\"],\n        { span: 6, style: { textAlign: 'right' } },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_2__[\"Button\"],\n          {\n            type: 'primary',\n            loading: saveLoading,\n            icon: 'check',\n            onClick: () => handleHostsSave({ is_push: 0 })\n          },\n          '\\u4FDD\\u5B58'\n        )\n      )\n    ),\n    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n      'div',\n      { style: { flex: 1 } },\n      react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n        antd__WEBPACK_IMPORTED_MODULE_2__[\"Row\"],\n        { gutter: 16 },\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_2__[\"Col\"],\n          { span: 16 },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_codemirror2__WEBPACK_IMPORTED_MODULE_3__[\"Controlled\"], {\n            value: hosts,\n            options: {\n              mode: 'nginx',\n              tabSize: 2,\n              theme: 'dracula',\n              lineNumbers: true\n            },\n            onBeforeChange: (editor, data, value) => {\n              setHosts(value);\n            },\n            editorDidMount: (editor, data, value) => {\n              editor.setSize('auto', '460px');\n            }\n          })\n        ),\n        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n          antd__WEBPACK_IMPORTED_MODULE_2__[\"Col\"],\n          { span: 8 },\n          react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\n            antd__WEBPACK_IMPORTED_MODULE_2__[\"Card\"],\n            { title: '\\u4FE1\\u606F', className: 'card-form' },\n            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_hostsInfo__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n              ref: infoRef,\n              isEdit: type === 'edit',\n              hostsInfo: hostsInfo\n            })\n          )\n        )\n      )\n    )\n  );\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (EditHosts);\n\n//# sourceURL=webpack:///./app/web/pages/switchHosts/editHosts/index.js?");

/***/ })

};;